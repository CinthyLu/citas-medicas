<div class="container">
  <h2>Gestión de Agendas Médicas</h2>

  <app-agenda-form
    [agenda]="selectedAgenda"
    [medicos]="medicos"
    [errorPadre]="errorPadre"
    (onSave)="onSaveAgenda($event)"
    (onCancel)="cancelarEdicion()">
  </app-agenda-form>

  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>Médico</th>
        <th>Fecha</th>
        <th>Hora Inicio</th>
        <th>Hora Fin</th>
        <th>Disponible</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let agenda of agendas$ | async">
        <td data-label="Médico">{{ getNombreMedico(agenda.uidMedico) }}</td>
        <td data-label="Fecha">{{ agenda.fecha }}</td>
        <td data-label="Hora Inicio">{{ agenda.horaInicio }}</td>
        <td data-label="Hora Fin">{{ agenda.horaFin }}</td>
        <td data-label="Disponible">{{ agenda.disponible ? 'Sí' : 'No' }}</td>
        <td data-label="Acciones">
          <button class="btn btn-sm btn-warning btn-edit" (click)="editAgenda(agenda)">Editar</button>
          <button class="btn btn-sm btn-danger btn-delete" (click)="deleteAgenda(agenda.id!)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
